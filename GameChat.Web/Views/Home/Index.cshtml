@{
    ViewBag.Title = "Home Page";
}

<div class="row">
    <div class="col-lg-12">
        <form data-bind="visible: !isReady(), disable: isLoading" class="form-inline">
            <input data-bind="value: password" type="password" class="form-control" placeholder="password" />
            <button data-bind="click: start" class="btn btn-success">Start</button>
        </form>
        <select data-bind="
    visible: isReady, 
    options: sources, 
    optionsText: function(item) { return item.name; }, 
    optionsCaption: 'Choose a source...',
    value: selectedSource" class="form-control"></select>
    </div>
</div>
<div data-bind="visible: isChatReady" class="row">
    <div class="col-lg-12">
        <ul data-bind="foreach: chatMessages" style="height: 500px">

        </ul>
    </div>
</div>
<div data-bind="visible: isChatReady" class="row">
    <div class="col-lg-12">
        <form class="form-inline">
            <input data-bind="value: newMessage" type="text" class="form-control" />
            <button data-bind="click: send" type="button" class="btn btn-info">Send</button>
        </form>
    </div>
</div>

@section scripts{
    <script src="~/lib/signalr/jquery.signalR.js"></script>
    <script src="~/lib/knockout/knockout.js"></script>
    <script src="~/signalr/hubs"></script>
    <script src="~/lib/requirejs/require.js" data-main="js/app.js"></script>
    <script type="text/javascript">
        $(function () {
            var chatHub = $.connection.chatHub;

            chatHub.client.echo = function (message) {
                alert(message);
            };

            $.connection.hub.start().done(function () {
                chatHub.server.echo('Test');
            });
        });
    </script>
}